<!DOCTYPE html>
<html>
<head>
    <title>Test Firebase Auth</title>
    <script src="https://www.gstatic.com/firebasejs/10.7.1/firebase-app-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/10.7.1/firebase-auth-compat.js"></script>
</head>
<body>
    <h1>Firebase Auth Test</h1>
    <div id="status">Initializing...</div>
    <br>
    <button onclick="testLogin()">Test Login</button>
    <button onclick="testDemo()">Test Demo Login</button>
    <br><br>
    <div id="result"></div>

    <script>
        // Firebase configuration
        const firebaseConfig = {
            apiKey: "AIzaSyBGeAvfO35-KL0r1UhfzykfGtNeeuK5dyY",
            authDomain: "turbo-air-viewer.firebaseapp.com",
            databaseURL: "https://turbo-air-viewer-default-rtdb.firebaseio.com",
            projectId: "turbo-air-viewer",
            storageBucket: "turbo-air-viewer.firebasestorage.app",
            messagingSenderId: "776327668241",
            appId: "1:776327668241:web:c7e1c887f956e21e74ba4f"
        };

        // Initialize Firebase
        firebase.initializeApp(firebaseConfig);
        const auth = firebase.auth();

        document.getElementById('status').innerHTML = 'Firebase initialized successfully!';

        function testLogin() {
            const email = 'andres@turboairmexico.com';
            const password = 'TurboAir2025';
            
            document.getElementById('result').innerHTML = 'Attempting login...';
            
            auth.signInWithEmailAndPassword(email, password)
                .then((userCredential) => {
                    document.getElementById('result').innerHTML = 
                        'Login successful! User: ' + userCredential.user.email;
                })
                .catch((error) => {
                    document.getElementById('result').innerHTML = 
                        'Login failed: ' + error.code + ' - ' + error.message;
                });
        }

        function testDemo() {
            const email = 'demo@turboair.com';
            const password = 'demo123456';
            
            document.getElementById('result').innerHTML = 'Attempting demo login...';
            
            auth.signInWithEmailAndPassword(email, password)
                .then((userCredential) => {
                    document.getElementById('result').innerHTML = 
                        'Demo login successful! User: ' + userCredential.user.email;
                })
                .catch((error) => {
                    // Try to create demo account if it doesn't exist
                    if (error.code === 'auth/user-not-found') {
                        auth.createUserWithEmailAndPassword(email, password)
                            .then((userCredential) => {
                                document.getElementById('result').innerHTML = 
                                    'Demo account created and logged in! User: ' + userCredential.user.email;
                            })
                            .catch((createError) => {
                                document.getElementById('result').innerHTML = 
                                    'Demo account creation failed: ' + createError.code + ' - ' + createError.message;
                            });
                    } else {
                        document.getElementById('result').innerHTML = 
                            'Demo login failed: ' + error.code + ' - ' + error.message;
                    }
                });
        }

        // Check current auth state
        auth.onAuthStateChanged((user) => {
            if (user) {
                console.log('User is signed in:', user.email);
            } else {
                console.log('No user signed in');
            }
        });
    </script>
</body>
</html>